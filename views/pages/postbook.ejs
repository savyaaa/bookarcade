<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="shortcut icon"
      href="/images/book-icon.png"
      type="image/x-icon"
    />
    <link
      rel="stylesheet"
      data-purpose="Layout StyleSheet"
      title="Web Awesome"
      href="/css/app-wa-09b459cf485d4b1f3304947240314c05.css?vsn=d"
    />

    <link
      rel="stylesheet"
      href="https://site-assets.fontawesome.com/releases/v6.6.0/css/all.css"
    />

    <link
      rel="stylesheet"
      href="https://site-assets.fontawesome.com/releases/v6.6.0/css/sharp-duotone-solid.css"
    />

    <link
      rel="stylesheet"
      href="https://site-assets.fontawesome.com/releases/v6.6.0/css/sharp-thin.css"
    />

    <link
      rel="stylesheet"
      href="https://site-assets.fontawesome.com/releases/v6.6.0/css/sharp-solid.css"
    />

    <link
      rel="stylesheet"
      href="https://site-assets.fontawesome.com/releases/v6.6.0/css/sharp-regular.css"
    />

    <link
      rel="stylesheet"
      href="https://site-assets.fontawesome.com/releases/v6.6.0/css/sharp-light.css"
    />
    <link rel="stylesheet" href="/css/main.css" />
    <title>BookArcade | Postbook</title>
  </head>
  <body class="w-screen h-screen overflow-x-hidden">
    <%- include('../partials/_header.ejs') %>
    <main class="w-full min-h-screen bg-[#f4efe1] py-8 px-4 md:px-8">
      <div class="max-w-2xl mx-auto bg-white rounded-lg shadow-lg p-8">
        <h1 class="text-3xl font-serif text-[#3c2f2f] mb-6 text-center">
          Upload a New Book
        </h1>
        <form
          class="flex flex-col gap-6"
          action="/api/library/postbook"
          method="POST"
          enctype="multipart/form-data"
        >
          <div class="flex flex-col">
            <label for="title" class="text-[#5c4f3d] mb-2 font-semibold"
              >Title:</label
            >
            <input
              type="text"
              id="title"
              name="title"
              required
              class="border-2 border-[#8b7d6b] rounded-md px-3 py-2 focus:outline-none focus:border-[#5c4f3d] transition-colors duration-300"
            />
          </div>

          <div class="flex flex-col">
            <label for="author" class="text-[#5c4f3d] mb-2 font-semibold"
              >Author:</label
            >
            <input
              type="text"
              id="author"
              name="author"
              required
              class="border-2 border-[#8b7d6b] rounded-md px-3 py-2 focus:outline-none focus:border-[#5c4f3d] transition-colors duration-300"
            />
          </div>
          <div class="flex flex-col">
            <label for="format" class="text-[#5c4f3d] mb-2 font-semibold"
              >Format:</label
            >
            <select
              id="format"
              name="format"
              required
              class="border-2 border-[#8b7d6b] rounded-md px-3 py-2 focus:outline-none focus:border-[#5c4f3d] transition-colors duration-300 bg-white"
            >
              <option value="pdf">PDF</option>
              <option value="epub">EPUB</option>
            </select>
          </div>

          <div class="flex flex-col">
            <label for="bookFile" class="text-[#5c4f3d] mb-2 font-semibold"
              >Book File:</label
            >
            <div class="relative">
              <input
                type="file"
                id="bookFile"
                name="bookFile"
                accept=".pdf,.epub"
                required
                class="opacity-0 absolute inset-0 w-full h-full cursor-pointer"
              />
              <div
                class="border-2 border-dashed border-[#8b7d6b] rounded-md px-3 py-6 text-center text-[#5c4f3d] cursor-pointer hover:bg-[#f4efe1] transition-colors duration-300"
              >
                <i class="fas fa-cloud-upload-alt text-2xl mb-2"></i>
                <p>Click or drag file to upload</p>
              </div>
            </div>
          </div>

          <div class="flex flex-col">
            <label for="coverImage" class="text-[#5c4f3d] mb-2 font-semibold"
              >Cover Image:</label
            >
            <div class="relative">
              <input
                type="file"
                id="coverImage"
                name="coverImage"
                accept="image/*"
                class="opacity-0 absolute inset-0 w-full h-full cursor-pointer"
              />
              <div
                class="border-2 border-dashed border-[#8b7d6b] rounded-md px-3 py-6 text-center text-[#5c4f3d] cursor-pointer hover:bg-[#f4efe1] transition-colors duration-300"
              >
                <i class="fas fa-image text-2xl mb-2"></i>
                <p>Click or drag image to upload</p>
              </div>
            </div>
          </div>

          <button
            type="submit"
            class="bg-[#8b7d6b] text-white py-3 px-6 rounded-md hover:bg-[#5c4f3d] transition-colors duration-300 mt-4 self-center"
          >
            <i class="fas fa-upload mr-2"></i>Upload Book
          </button>
        </form>
      </div>
    </main>
    <%-include('../partials/_footer.ejs') %>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      document.addEventListener("DOMContentLoaded", (event) => {
        const bookFileInput = document.getElementById("bookFile");
        const coverImageInput = document.getElementById("coverImage");

        function updateFileName(inputElement, displayElement) {
          inputElement.addEventListener("change", function (e) {
            if (e.target.files.length > 0) {
              displayElement.innerHTML = `<i class="fas fa-check text-green-500 mr-2"></i>${e.target.files[0].name}`;
            }
          });
        }

        updateFileName(
          bookFileInput,
          bookFileInput.nextElementSibling.querySelector("p")
        );
        updateFileName(
          coverImageInput,
          coverImageInput.nextElementSibling.querySelector("p")
        );
      });
    </script>
  </body>
</html>
